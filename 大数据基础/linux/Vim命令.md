# Vim

## 常用命令

### 插入字符

要记得先回到命令模式，

| 命令   | 作用 |
| ---- | -------------------- |
| a    | 在光标所在字符后插入 |
| A    | 在光标所在行尾插入   |
| i    | 在光标所在字符前插入 |
| I    | 在光标所在行行首插入 |
| o    | 在光标下插入新行     |
| O    | 在光标上插入新行     |

### 行号跳转

|命令  | 作用  |
| ---------- | ---------- |
| : set nu   | 设置行号   |
| : set nonu | 取消行号   |
| gg         | 到第一行   |
| G          | 到最后一行 |
| nG         | 到第n行    |
| : n        | 到第n行    |
| $          | 移至行尾   |
| 0          | 移至行首   |

### 关于删除

| 命令       | 作用           |
| -------- | -------------------------|
| x        | 删除光标所在处字符           |
| nx       | 删除光标所在处后n个字符      |
| dd       | 删除光标所在行，ndd删除n行   |
| dG       | 删除光标所在行到文件末尾内容 |
| D        | 删除光标所在处到行尾内容     |
| : n1,n2d | 删除指定范围的行             |

### 关于复制剪切

| 命令  | 作用       |
| ---- | ----------------- |
| yy   | 复制当前行        |
| nyy  | 复制当前行以下n行 |
| dd | 剪切当前行 |
| ndd | 剪切当前行以下n行 |
| p\P | 粘贴在当前光标所在行下或行上 |

### 替换和取消命令

| 命令 | 作用                                |
| ---- | ----------------------------------- |
| r    | 取代光标所在处字符                  |
| R    | 从光标所在处开始替换字符，按Esc结束 |
| u    | 取消上一步操作                      |

### 搜索和搜索替换命令

| 命令              | 作用                                       |
| ----------------- | ------------------------------------------ |
| /string           | 搜索时指定字符串（搜索时忽略大小写: set ic |
| n                 | 搜索指定字符串的下一个出现位置             |
| :%s/old/new/g     | 全文替换指定字符串（/g是不用确认）         |
| :n1,n2s/old/new/g | 在一定范围内替换指定字符串                 |

### 保存和退出命令

| 命令             | 作用                                           |
| ---------------- | ---------------------------------------------- |
| : w              | 保存修改                                       |
| : w new_filename | 另存为指定文件                                 |
| : wq             | 保存修改并退出                                 |
| ZZ               | 保存修改并退出                                 |
| : q!             | 不保存修改退出                                 |
| : wq!            | 保存修改并退出（仅文件所有者及root用户可使用） |

## 使用技巧

1. 导入命令执行结果：`r !命令`
2. 定义快捷键：`map 快捷键 触发命令`，要注意快捷键要先按Ctrl+V（或者三个键同时按），然后触发命令是Vim的命令，如增加快捷键Ctrl+P注释掉某一行，`map Ctrl+V+P I#<ESC>`,增加快捷键取消注释，`map Ctrl+V+B 0x`
3. 连续行注释: `:n1,n2s/^/#/g` `^`表示行首（正则表达式）
4. 取消连续行注释： `:n1,n2s/^#/`
5. 有的时候注释是以`//`开头,于是需要为其加上转义符 \ `：n1,n2s/^/\/\//g `