Zookeeper是一个开源的分布式，为分布式应用提供协调服务的Apache项目。

Zookeeper从设计模式来理解，是一个基于**观察者模式**设计的分布式服务管理框架，负责存储和管理数据，接收观察者注册的信息。一旦这些数据的状况发生变化，zookeeper就负责通知已经在Zookeeper上注册的观察者以响应。

**Zookeeper= 文件系统 + 通知机制**

Zookeeper：一个领导者（Leader），多个跟随着（Followers）组成的集群。

全局数据一致：每个Server保存一份相同的数据副本，Client无论连接到哪个Server，数据都是一致的。

更新请求按顺序执行。

数据更新具有原子性，实时性，在一定时间范围内，Client能读到最新的数据。

Zookeeper数据结构

Zookeeper数据模型的结构与Unix文件系统很类似，整体上可以看作一棵树，每个节点称为ZNode。

## Zookeeper应用场景

Zookeeper提供统一命名服务、统一配置管理、统一集群管理、服务器节点动态上下线，软负载均衡等。

- 在分布式环境下，经常需要堆应用/服务进行统一命名，便于识别。

- 分布式环境下，配置文件同步非常常见。

  - 如Kafka集群，要求所有节点的配置信息一致

  - 对配置文件修改后，希望能快速同步到各个节点上

- 配置管理交由Zookeeper实现
  - 将配置信息写入Zookeeper上的一个Znode
  - 各个客户端服务器监听这个Znode
  - 一旦Znode中数据被修改，Zookeeper将通知各个客户端服务器。
- 分布式环境下，实时掌握每个节点的状态是必要的
  - 根据节点实时状态做出一些调整
- Zookeeper可以实时监控节点状态变化。
  - 可将节点信息写入Zookeeper上的一个Znode
  - 监听这个Znode可获取它的实时状态变化。

软负载均衡，在zookeeper中记录每台服务器的访问数，让访问数最少的服务器去处理最新的客户端请求。



