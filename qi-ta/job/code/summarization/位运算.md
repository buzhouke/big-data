# 位运算

## 位运算符概览

| a    | b    | ~a   | a&b  | a\|b | a^b  |
| ---- | ---- | ---- | ---- | ---- | ---- |
| 1    | 1    | 0    | 1    | 1    | 0    |
| 0    | 1    | 1    | 0    | 1    | 1    |
| 0    | 0    | 1    | 0    | 0    | 0    |

<<    :   左移运算符，num << 1,相当于num乘以2

\>>    :   右移运算符，num >> 1,相当于num除以2

\>>>   :   无符号右移，忽略符号位，空位都以0补齐

## 运算符（&，|，^，~，>>）

![](https://i.bmp.ovh/imgs/2020/01/fd47089d084a0481.png)

### **&** 按位与

按位与的运算规则是将两边的数转换为二进制位，然后运算最终值，运算规则即(两个为真才为真)1&1=1 , 1&0=0 , 0&1=0 , 0&0=0

3的二进制位是0000 0011 ， 5的二进制位是0000 0101 ， 那么就是011 & 101，由按位与运算规则得知，001 & 101等于0000 0001，最终值为1

7的二进制位是0000 0111，那就是111 & 101等于101，也就是0000 0101，故值为5

### **|** 按位或

按位或(|)和&按位与(&)计算方式都是转换二进制再计算，不同的是运算规则(一个为真即为真)1|0 = 1 , 1|1 = 1 , 0|0 = 0 , 0|1 = 1

6的二进制位0000 0110 , 2的二进制位0000 0010 , 110|010为110，最终值0000 0110，故6|2等于6

### **~** 取反

取反就是1为0,0为1,5的二进制位是0000 0101，取反后为1111 1010，值为-6

### **>>**右移运算符

### **>>>**无符号右移

### 进制转换Java API<img src = 'https://i.bmp.ovh/imgs/2020/01/7dbaf9d6c057cd1f.png' />

## 位运算的应用

1、n&1 = 0 | 1 来判断n的奇偶数

2、(num >> (bit -1)) & 1 获取num在第bit位上的值

3、用异或运算交换两个数的值（异或的自反性：A^  B ^B = A^0 = A)

```
 x = x^y; 
 y = x^y;  //y=(x^y)^y        
 x = x^y;  //x=(x^y)^x
```

4、判断二进制中有多少个1；

（num-1)&num 循环直至 num = 0；

5、整数的奇偶位互换

```java
public static int f(int x) {
		int ou = x & 0xaaaaaaaa; // 和1010 1010 1010……做与运算取出偶数位
		int ji = x & 0x55555555; // 和0101 0101 0101……做与运算取出奇数位
		return (ou >> 1) ^ (ji << 1);
	}
```

6、二进制表示浮点数（和位运算关系其实不大）：乘以二挪去整数



REFERENCE

------

https://cloud.tencent.com/developer/article/1336599

https://www.bilibili.com/video/av73763711?p=11

